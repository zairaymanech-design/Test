<div class="chart-wrapper">
  <!-- Scrollable Legend on the Left -->
  <div class="chart-legend">
    <div *ngFor="let label of pieChartData.labels; let i = index" class="legend-item">
      <span
        class="legend-color"
        [style.background]="backgroundColors[i] || '#ccc'">
      </span>
      <span class="legend-text">{{ label }}</span>
    </div>
  </div>

  <!-- Pie Chart -->
  <div class="chart-canvas">
    <canvas
      baseChart
      [data]="pieChartData"
      [type]="pieChartType"
      [options]="pieChartOptions">
    </canvas>
  </div>
</div>

import { Component } from '@angular/core';
import { ChartConfiguration, ChartType } from 'chart.js';

@Component({
  selector: 'app-pie-chart',
  templateUrl: './pie-chart.component.html',
  styleUrls: ['./pie-chart.component.css']
})
export class PieChartComponent {
  public pieChartType: ChartType = 'pie';

  public pieChartData: ChartConfiguration<'pie'>['data'] = {
    labels: [
      'Apple', 'Banana', 'Mango', 'Grape', 'Orange',
      'Kiwi', 'Pineapple', 'Peach', 'Cherry', 'Strawberry'
    ],
    datasets: [{
      data: [10, 12, 8, 6, 14, 5, 9, 11, 7, 10],
      backgroundColor: [
        '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0',
        '#9966FF', '#FF9F40', '#C9CBCF', '#FFCD56',
        '#66FF66', '#FF6666'
      ],
      borderWidth: 1,
    }]
  };

  public pieChartOptions: ChartConfiguration<'pie'>['options'] = {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: { display: false }, // We'll render our own legend
      tooltip: { enabled: true }
    }
  };

  // âœ… Safe getter for colors (avoids TS2532)
  get backgroundColors(): string[] {
    return (this.pieChartData.datasets?.[0]?.backgroundColor as string[]) || [];
  }
}



.chart-wrapper {
  display: flex;
  align-items: flex-start;
  justify-content: center;
  gap: 12px;
  max-width: 700px;
  margin: auto;
  padding: 10px;
}

/* Left legend */
.chart-legend {
  width: 160px;
  max-height: 400px;
  overflow-y: auto;
  border-right: 1px solid #ddd;
  padding-right: 10px;
  font-size: 13px;
}

.legend-item {
  display: flex;
  align-items: center;
  margin-bottom: 6px;
}

.legend-color {
  width: 12px;
  height: 12px;
  border-radius: 2px;
  margin-right: 8px;
}

.chart-canvas {
  flex: 1;
  min-width: 300px;
  height: 400px;
  position: relative;
}

/* Responsive behavior: stack on small screens */
@media (max-width: 600px) {
  .chart-wrapper {
    flex-direction: column;
    align-items: center;
  }

  .chart-legend {
    border-right: none;
    border-bottom: 1px solid #ddd;
    width: 100%;
    max-height: 150px;
    overflow-x: auto;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
  }

  .legend-item {
    margin: 4px 8px;
  }

  .chart-canvas {
    height: 300px;
  }
}